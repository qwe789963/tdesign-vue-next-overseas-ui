# Menu ç»„ä»¶ API å¥‘çº¦

**ç‰ˆæœ¬**: 1.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-25  
**å¥‘çº¦ç±»å‹**: Vue Component API

---

## 1. ç»„ä»¶æ¥å£å®šä¹‰

### 1.1 Menu ç»„ä»¶

#### Props

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `s2` | `boolean` | å¦ | `true` | å¯ç”¨ S2 è§„èŒƒï¼ˆDrawer æŠ½å±‰èœå•ï¼‰ |
| `mouseOverTrigger` | `boolean` | å¦ | `false` | é¼ æ ‡æ‚¬åœè§¦å‘å±•å¼€ï¼ˆæ— éœ€ç‚¹å‡»ï¼‰ |
| `collapsed` | `boolean` | å¦ | `false` | æ”¶èµ·èœå• |
| `expanded` | `MenuValue[]` | å¦ | `undefined` | å±•å¼€çš„èœå•é¡¹ï¼ˆå—æ§ï¼‰ |
| `defaultExpanded` | `MenuValue[]` | å¦ | `[]` | é»˜è®¤å±•å¼€çš„èœå•é¡¹ï¼ˆéå—æ§ï¼‰ |
| `expandMutex` | `boolean` | å¦ | `false` | åŒçº§äº’æ–¥å±•å¼€ |
| `expandType` | `'normal' \| 'popup'` | å¦ | `'normal'` | äºŒçº§èœå•å±•å¼€æ–¹å¼ |
| `thirdExpandType` | `'normal' \| 'popup'` | å¦ | `'popup'` | ä¸‰çº§èœå•å±•å¼€æ–¹å¼ |
| `logo` | `TNode` | å¦ | `undefined` | ç«™ç‚¹ LOGO |
| `operations` | `TNode` | å¦ | `undefined` | æ“ä½œåŒºåŸŸ |
| `theme` | `'light' \| 'dark'` | å¦ | `'light'` | ä¸»é¢˜ |
| `value` | `MenuValue` | å¦ | `undefined` | æ¿€æ´»èœå•é¡¹ï¼ˆå—æ§ï¼‰ |
| `defaultValue` | `MenuValue` | å¦ | `undefined` | é»˜è®¤æ¿€æ´»èœå•é¡¹ï¼ˆéå—æ§ï¼‰ |
| `width` | `string \| number \| [string \| number, string \| number]` | å¦ | `['300px', '64px']` | èœå•å®½åº¦ |

#### Events

| äº‹ä»¶å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `change` | `(value: MenuValue) => void` | æ¿€æ´»èœå•é¡¹å˜æ›´æ—¶è§¦å‘ |
| `expand` | `(values: MenuValue[]) => void` | å±•å¼€èœå•é¡¹å˜æ›´æ—¶è§¦å‘ |

#### Slots

| æ’æ§½å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `default` | - | é»˜è®¤æ’æ§½ï¼Œæ”¾ç½®èœå•é¡¹ |
| `logo` | - | è‡ªå®šä¹‰ LOGO åŒºåŸŸ |
| `operations` | - | è‡ªå®šä¹‰æ“ä½œåŒºåŸŸ |

---

### 1.2 HeadMenu ç»„ä»¶

#### Props

ç»§æ‰¿ `Menu` ç»„ä»¶çš„æ‰€æœ‰ Propsï¼Œæ–°å¢ï¼š

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| *(ç»§æ‰¿ Menu Props)* | - | - | - | æ‰€æœ‰ Menu ç»„ä»¶çš„ Props |

#### Events

ç»§æ‰¿ `Menu` ç»„ä»¶çš„æ‰€æœ‰ Eventsã€‚

#### Slots

| æ’æ§½å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `default` | - | é»˜è®¤æ’æ§½ï¼Œé¡¶éƒ¨å¯¼èˆªèœå•å†…å®¹ |
| `logo` | - | è‡ªå®šä¹‰ LOGO åŒºåŸŸ |
| `operations` | - | è‡ªå®šä¹‰æ“ä½œåŒºåŸŸ |
| `s2Menu` | - | **S2 è§„èŒƒ**: Drawer æŠ½å±‰èœå•å†…å®¹ |
| `trigger` | - | **S2 è§„èŒƒ**: è‡ªå®šä¹‰ Drawer è§¦å‘æŒ‰é’® |

---

### 1.3 Submenu ç»„ä»¶

#### Props

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `value` | `MenuValue` | **æ˜¯** | - | å­èœå•å”¯ä¸€æ ‡è¯† |
| `title` | `string \| TNode` | **æ˜¯** | - | å­èœå•æ ‡é¢˜ |
| `icon` | `TNode` | å¦ | `undefined` | å›¾æ ‡ |
| `disabled` | `boolean` | å¦ | `false` | æ˜¯å¦ç¦ç”¨ |

#### Events

æ— ç‹¬ç«‹äº‹ä»¶ï¼ˆé€šè¿‡ Menu ç»„ä»¶çš„ `onExpand` è§¦å‘ï¼‰ã€‚

#### Slots

| æ’æ§½å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `default` | - | å­èœå•å†…å®¹ï¼ˆåµŒå¥—çš„ MenuItem æˆ– Submenuï¼‰ |
| `icon` | - | è‡ªå®šä¹‰å›¾æ ‡ |
| `title` | - | è‡ªå®šä¹‰æ ‡é¢˜ |

---

### 1.4 MenuItem ç»„ä»¶

#### Props

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `value` | `MenuValue` | **æ˜¯** | - | èœå•é¡¹å”¯ä¸€æ ‡è¯† |
| `icon` | `TNode` | å¦ | `undefined` | å›¾æ ‡ |
| `to` | `string \| object` | å¦ | `undefined` | è·¯ç”±åœ°å€ |
| `disabled` | `boolean` | å¦ | `false` | æ˜¯å¦ç¦ç”¨ |

#### Events

| äº‹ä»¶å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `click` | `(e: Event) => void` | ç‚¹å‡»èœå•é¡¹æ—¶è§¦å‘ |

#### Slots

| æ’æ§½å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `default` | - | èœå•é¡¹å†…å®¹ |
| `icon` | - | è‡ªå®šä¹‰å›¾æ ‡ |

---

### 1.5 MenuGroup ç»„ä»¶

#### Props

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `title` | `string \| TNode` | å¦ | `undefined` | åˆ†ç»„æ ‡é¢˜ |

#### Events

æ— ã€‚

#### Slots

| æ’æ§½å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `default` | - | åˆ†ç»„å†…å®¹ï¼ˆMenuItem æˆ– Submenuï¼‰ |
| `title` | - | è‡ªå®šä¹‰æ ‡é¢˜ |

---

## 2. ç±»å‹å®šä¹‰

### 2.1 åŸºç¡€ç±»å‹

```typescript
/**
 * èœå•é¡¹å€¼ç±»å‹
 */
export type MenuValue = string | number;

/**
 * TNode ç±»å‹ (çµæ´»èŠ‚ç‚¹ç±»å‹)
 */
export type TNode = VNode | (() => VNode) | string | number | undefined | null;

/**
 * å±•å¼€æ–¹å¼
 */
export type ExpandType = 'normal' | 'popup';

/**
 * ä¸»é¢˜
 */
export type MenuTheme = 'light' | 'dark';
```

---

### 2.2 ç»„ä»¶ Props ç±»å‹

```typescript
/**
 * Menu ç»„ä»¶ Props
 */
export interface TdMenuProps {
  s2?: boolean;
  mouseOverTrigger?: boolean;
  collapsed?: boolean;
  expanded?: Array<MenuValue>;
  defaultExpanded?: Array<MenuValue>;
  expandMutex?: boolean;
  expandType?: ExpandType;
  thirdExpandType?: ExpandType;
  logo?: TNode;
  operations?: TNode;
  theme?: MenuTheme;
  value?: MenuValue;
  defaultValue?: MenuValue;
  width?: string | number | [string | number, string | number];
  onChange?: (value: MenuValue) => void;
  onExpand?: (values: Array<MenuValue>) => void;
}

/**
 * HeadMenu ç»„ä»¶ Props (ç»§æ‰¿ TdMenuProps)
 */
export interface TdHeadMenuProps extends TdMenuProps {
  // HeadMenu ç‰¹æœ‰çš„ Props (å¦‚æœ‰)
}

/**
 * Submenu ç»„ä»¶ Props
 */
export interface TdSubmenuProps {
  value: MenuValue;
  title: string | TNode;
  icon?: TNode;
  disabled?: boolean;
}

/**
 * MenuItem ç»„ä»¶ Props
 */
export interface TdMenuItemProps {
  value: MenuValue;
  icon?: TNode;
  to?: string | { path: string; query?: Record<string, any> };
  disabled?: boolean;
  onClick?: (e: Event) => void;
}

/**
 * MenuGroup ç»„ä»¶ Props
 */
export interface TdMenuGroupProps {
  title?: string | TNode;
}
```

---

## 3. è¡Œä¸ºå¥‘çº¦

### 3.1 æ¿€æ´»èœå•é¡¹

**è¾“å…¥**:
- ç”¨æˆ·ç‚¹å‡»èœå•é¡¹
- æˆ–é€šè¿‡ `value` prop æ§åˆ¶

**è¾“å‡º**:
- è§¦å‘ `onChange` äº‹ä»¶
- èœå•é¡¹é«˜äº®æ ·å¼å˜æ›´
- å¦‚æœè®¾ç½®äº† `to` å±æ€§ï¼Œè§¦å‘è·¯ç”±è·³è½¬

**å‰ç½®æ¡ä»¶**:
- èœå•é¡¹æœªç¦ç”¨ (`disabled=false`)

**åç½®æ¡ä»¶**:
- `activeValue` æ›´æ–°ä¸ºæ–°å€¼
- çˆ¶ç»„ä»¶æ¥æ”¶åˆ° `onChange` äº‹ä»¶ï¼ˆå—æ§æ¨¡å¼ï¼‰

---

### 3.2 å±•å¼€/æ”¶èµ·å­èœå•

**è¾“å…¥**:
- ç”¨æˆ·ç‚¹å‡»å­èœå•æ ‡é¢˜ (mouseOverTrigger=false)
- æˆ–é¼ æ ‡ç§»å…¥å­èœå• (mouseOverTrigger=true)

**è¾“å‡º**:
- å­èœå•å±•å¼€/æ”¶èµ·åŠ¨ç”»
- è§¦å‘ `onExpand` äº‹ä»¶

**å‰ç½®æ¡ä»¶**:
- å­èœå•æœªç¦ç”¨ (`disabled=false`)

**åç½®æ¡ä»¶**:
- `expandedValues` æ›´æ–°
- å¦‚æœ `expandMutex=true`ï¼Œå…¶ä»–åŒçº§å­èœå•è‡ªåŠ¨æ”¶èµ·

---

### 3.3 S2 Drawer æ‰“å¼€/å…³é—­

**æ‰“å¼€æ¡ä»¶**:
- `s2=true`
- ç”¨æˆ·ç‚¹å‡»è§¦å‘æŒ‰é’®ï¼ˆViewListIcon æˆ–è‡ªå®šä¹‰æŒ‰é’®ï¼‰

**å…³é—­æ¡ä»¶**:
- ç”¨æˆ·ç‚¹å‡»å…³é—­æŒ‰é’®ï¼ˆCloseCircleIconï¼‰
- ç”¨æˆ·ç‚¹å‡» Drawer å†…èœå•é¡¹
- ç”¨æˆ·ç‚¹å‡»å¤–éƒ¨é®ç½©ï¼ˆ`closeOnOverlayClick=true`ï¼‰

**çŠ¶æ€å˜æ›´**:
- `s2MenuVisible` ä» false â†’ trueï¼ˆæ‰“å¼€ï¼‰
- `s2MenuVisible` ä» true â†’ falseï¼ˆå…³é—­ï¼‰

---

### 3.4 é¼ æ ‡æ‚¬åœè§¦å‘

**è¾“å…¥**:
- `mouseOverTrigger=true`
- é¼ æ ‡ç§»å…¥èœå•é¡¹

**è¾“å‡º**:
- å­èœå•è‡ªåŠ¨å±•å¼€ï¼ˆæ— éœ€ç‚¹å‡»ï¼‰

**å»¶è¿Ÿ**:
- ç§»å‡ºåå»¶è¿Ÿ 200ms è‡ªåŠ¨æ”¶èµ·

**ç§»åŠ¨ç«¯è¡Œä¸º**:
- ä¸ Vue2 ä¸€è‡´ï¼Œä¸åšè®¾å¤‡æ£€æµ‹
- ä¾èµ–æµè§ˆå™¨çš„è§¦æ‘¸äº‹ä»¶è½¬æ¢è¡Œä¸º

---

## 4. é”™è¯¯å¤„ç†å¥‘çº¦

### 4.1 é‡å¤ MenuValue

**åœºæ™¯**: åŒä¸€å±‚çº§å­˜åœ¨é‡å¤çš„ `value`

**å¤„ç†**:
```typescript
console.error(`Duplicate menu value: ${value} at path: ${path.join(' > ')}`);
```

**è¡Œä¸º**:
- ä»…ç¬¬ä¸€ä¸ªåŒ¹é…çš„èœå•é¡¹å¯æ¿€æ´»
- å…¶ä»–é‡å¤é¡¹æ— æ³•æ¿€æ´»

---

### 4.2 Drawer æ‰“å¼€å¤±è´¥

**åœºæ™¯**: Drawer ç»„ä»¶åŠ è½½å¤±è´¥æˆ– API ä¸å…¼å®¹

**å¤„ç†**:
```typescript
console.error('Failed to open S2 Drawer:', error);
```

**é™çº§æ–¹æ¡ˆ**:
- ç¦ç”¨ S2 åŠŸèƒ½
- åœ¨æ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯

---

### 4.3 è·¯ç”±è·³è½¬å¤±è´¥

**åœºæ™¯**: `to` å±æ€§çš„è·¯ç”±åœ°å€æ— æ•ˆ

**å¤„ç†**:
```typescript
router.push(to).catch((err) => {
  console.error('Route navigation failed:', err);
});
```

**è¡Œä¸º**:
- èœå•é¡¹ä»ç„¶æ¿€æ´»
- è·¯ç”±ä¸è·³è½¬

---

## 5. æ€§èƒ½å¥‘çº¦

### 5.1 æ¸²æŸ“æ€§èƒ½

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹å¼ |
|------|------|---------|
| é¦–æ¬¡æ¸²æŸ“æ—¶é—´ | < 100ms | Performance API |
| èœå•å±•å¼€å»¶è¿Ÿ | < 50ms | ç‚¹å‡»åˆ° DOM æ›´æ–° |
| åŠ¨ç”»æµç•…åº¦ | 300ms åŠ¨ç”»æ—¶é•¿ | ä½¿ç”¨æ ‡å‡†ç¼“åŠ¨å‡½æ•° |
| å¤§æ•°æ®é‡èœå• (100+ é¡¹) | æ— æ˜æ˜¾å¡é¡¿ | è™šæ‹Ÿæ»šåŠ¨ |

---

### 5.2 å†…å­˜ä½¿ç”¨

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹å¼ |
|------|------|---------|
| ç»„ä»¶å®ä¾‹å†…å­˜ | < 1MB | Chrome DevTools Memory Profiler |
| æ— å†…å­˜æ³„æ¼ | 100% | ç»„ä»¶é”€æ¯åå†…å­˜é‡Šæ”¾ |

---

## 6. å…¼å®¹æ€§å¥‘çº¦

### 6.1 æµè§ˆå™¨å…¼å®¹æ€§

| æµè§ˆå™¨ | æœ€ä½ç‰ˆæœ¬ | æµ‹è¯•çŠ¶æ€ |
|--------|---------|---------|
| Chrome | 90+ | âœ… æ”¯æŒ |
| Firefox | 88+ | âœ… æ”¯æŒ |
| Safari | 14+ | âœ… æ”¯æŒ |
| Edge | 90+ | âœ… æ”¯æŒ |
| Chrome for Android | 90+ | âœ… æ”¯æŒ |
| iOS Safari | 14+ | âœ… æ”¯æŒ |

---

### 6.2 Vue ç‰ˆæœ¬å…¼å®¹æ€§

| Vue ç‰ˆæœ¬ | å…¼å®¹æ€§ | è¯´æ˜ |
|---------|--------|------|
| Vue 3.2+ | âœ… å®Œå…¨å…¼å®¹ | æ¨èç‰ˆæœ¬ |
| Vue 3.0 - 3.1 | ğŸŸ¡ éƒ¨åˆ†å…¼å®¹ | å¯èƒ½ç¼ºå°‘éƒ¨åˆ† API |
| Vue 2.x | âŒ ä¸å…¼å®¹ | è¯·ä½¿ç”¨ Vue2 ç‰ˆæœ¬çš„ Menu ç»„ä»¶ |

---

## 7. å‘åå…¼å®¹æ€§

### 7.1 ä¸ Vue2 ç‰ˆæœ¬çš„å·®å¼‚

| ç‰¹æ€§ | Vue2 ç‰ˆæœ¬ | Vue3 ç‰ˆæœ¬ | å…¼å®¹æ€§ |
|------|----------|----------|--------|
| API é£æ ¼ | Options API | Composition API | âœ… ç”¨æˆ· API ä¸€è‡´ |
| Props å®šä¹‰ | å®Œå…¨ä¸€è‡´ | å®Œå…¨ä¸€è‡´ | âœ… 100% å…¼å®¹ |
| æ’æ§½è¯­æ³• | `v-slot` | `v-slot` | âœ… ä¸€è‡´ |
| äº‹ä»¶è§¦å‘ | `@change` | `@change` | âœ… ä¸€è‡´ |
| Drawer ç»„ä»¶ | å†…éƒ¨å®ç° | `@tdesign/vue-next` | âœ… API ä¸€è‡´ |
| S2 è§„èŒƒ | å®Œå…¨æ”¯æŒ | å®Œå…¨æ”¯æŒ | âœ… 100% å…¼å®¹ |

---

### 7.2 ç ´åæ€§å˜æ›´

**æ— ç ´åæ€§å˜æ›´**ã€‚æ‰€æœ‰ Vue2 ç‰ˆæœ¬çš„ APIã€è¡Œä¸ºå’Œæ ·å¼åœ¨ Vue3 ç‰ˆæœ¬ä¸­ä¿æŒå®Œå…¨ä¸€è‡´ã€‚

---

## 8. æµ‹è¯•å¥‘çº¦

### 8.1 å•å…ƒæµ‹è¯•è¦†ç›–ç‡

| ç±»å‹ | è¦†ç›–ç‡ç›®æ ‡ | å½“å‰çŠ¶æ€ |
|------|-----------|---------|
| è¯­å¥è¦†ç›–ç‡ | > 80% | â³ å¾…æµ‹è¯• |
| åˆ†æ”¯è¦†ç›–ç‡ | > 75% | â³ å¾…æµ‹è¯• |
| å‡½æ•°è¦†ç›–ç‡ | > 85% | â³ å¾…æµ‹è¯• |
| è¡Œè¦†ç›–ç‡ | > 80% | â³ å¾…æµ‹è¯• |

---

### 8.2 å…³é”®æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•ç”¨ä¾‹ ID | æè¿° | ä¼˜å…ˆçº§ |
|------------|------|--------|
| TC-001 | ç‚¹å‡»èœå•é¡¹è§¦å‘ onChange äº‹ä»¶ | P0 |
| TC-002 | å±•å¼€/æ”¶èµ·å­èœå•è§¦å‘ onExpand äº‹ä»¶ | P0 |
| TC-003 | S2 Drawer æ‰“å¼€/å…³é—­åŠŸèƒ½ | P0 |
| TC-004 | mouseOverTrigger è§¦å‘å±•å¼€ | P0 |
| TC-005 | thirdExpandType æ§åˆ¶ä¸‰çº§èœå•å±•å¼€æ–¹å¼ | P1 |
| TC-006 | expandMutex åŒçº§äº’æ–¥å±•å¼€ | P1 |
| TC-007 | è·¯ç”±è·³è½¬åŠŸèƒ½ | P1 |
| TC-008 | é”®ç›˜å¯¼èˆªåŠŸèƒ½ | P2 |
| TC-009 | ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ | P2 |
| TC-010 | æ— éšœç¢è®¿é—® (ARIA) | P2 |

---

## 9. ç‰ˆæœ¬æ§åˆ¶

### 9.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬

**ç‰ˆæœ¬æ ¼å¼**: `MAJOR.MINOR.PATCH`

- **MAJOR**: ç ´åæ€§å˜æ›´ï¼ˆAPI ä¸å…¼å®¹ï¼‰
- **MINOR**: æ–°å¢åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
- **PATCH**: ä¿®å¤ BUGï¼ˆå‘åå…¼å®¹ï¼‰

**å½“å‰ç‰ˆæœ¬**: `1.0.0`ï¼ˆåˆå§‹å‘å¸ƒï¼‰

---

### 9.2 å˜æ›´æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ç±»å‹ | è¯´æ˜ |
|------|------|---------|------|
| 1.0.0 | 2026-02-25 | feat | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´è¿ç§» Vue2 ç‰ˆæœ¬åŠŸèƒ½ |

---

**å¥‘çº¦çŠ¶æ€**: âœ… å®šä¹‰å®Œæˆ  
**å®¡æ ¸äºº**: -  
**å®¡æ ¸æ—¥æœŸ**: -
