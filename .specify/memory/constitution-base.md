# Project Constitution Base

> **ç»§æ‰¿å£°æ˜**: æœ¬æ–‡ä»¶ç»§æ‰¿è‡ª `../../.codebuddy/.rules/team-rule.md`ï¼Œæ‰€æœ‰ `team-rule.md` ä¸­çš„è§„èŒƒåœ¨æœ¬æ–‡ä»¶ä¸­åŒæ ·é€‚ç”¨ã€‚
> å½“æœ¬æ–‡ä»¶ä¸ `team-rule.md` å­˜åœ¨å†²çªæ—¶ï¼Œä»¥ `team-rule.md` ä¸ºå‡†ã€‚

---

## ğŸ“Œ ç»§æ‰¿è§„èŒƒ

æœ¬æ–‡ä»¶ç»§æ‰¿ä»¥ä¸‹è§„èŒƒæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼š

| è§„èŒƒæ–‡ä»¶ | è·¯å¾„ | ä¼˜å…ˆçº§ | ä¸»è¦å†…å®¹ |
|---------|------|--------|----------|
| ä¸»è§„èŒƒ | `../../.codebuddy/.rules/team-rule.md` | æœ€é«˜ | ä»£ç è§„èŒƒã€å‘½åè§„èŒƒã€ç›®å½•ç»“æ„ã€å®‰å…¨è§„èŒƒã€ç²¾åº¦è®¡ç®—è§„èŒƒ |
| TypeScriptè§„èŒƒ | `../../.codebuddy/.rules/TypeScriptå®˜æ–¹è§„èŒƒ.md` | é«˜ | TypeScript è¯­æ³•å’Œç±»å‹è§„èŒƒ |
| TypeScriptå¼€å‘æŒ‡å— | `../../.codebuddy/.rules/TypeScriptç¼–ç¨‹å¼€å‘æŒ‡å—.md` | é«˜ | TypeScript å¼€å‘æœ€ä½³å®è·µ |
| CSSè§„èŒƒ | `../../.codebuddy/.rules/CSSå®˜æ–¹è§„èŒƒ.md` | é«˜ | CSS/Less æ ·å¼è§„èŒƒ |
| æ‰§è¡ŒæŒ‡å— | `../../.codebuddy/.rules/UNIFIED_RULES.md` | ä¸­ | è§„èŒƒæ‰§è¡ŒæŒ‡å— |

**ç»§æ‰¿åŸåˆ™**ï¼š
- æ‰€æœ‰ç»§æ‰¿è§„èŒƒä¸­çš„ã€å¿…é¡»ã€‘çº§åˆ«è¦æ±‚ï¼Œåœ¨æœ¬æ–‡ä»¶ä¸­åŒæ ·ä¸ºã€å¿…é¡»ã€‘
- æ‰€æœ‰ç»§æ‰¿è§„èŒƒä¸­çš„ã€æ¨èã€‘çº§åˆ«è¦æ±‚ï¼Œåœ¨æœ¬æ–‡ä»¶ä¸­åŒæ ·ä¸ºã€æ¨èã€‘
- æœ¬æ–‡ä»¶ä»…è¡¥å…… Spec-Kit å·¥ä½œæµç›¸å…³çš„è§„èŒƒï¼Œä¸é‡å¤å®šä¹‰å·²æœ‰è§„èŒƒ

**ç»§æ‰¿è‡ª team-rule.md çš„æ ¸å¿ƒè§„èŒƒ**ï¼ˆç›´æ¥å¼•ç”¨ï¼Œä¸é‡å¤å®šä¹‰ï¼‰ï¼š
- ã€å¿…é¡»ã€‘ä»£ç è§„èŒƒ - é€šç”¨è§„èŒƒã€å‘½åè§„èŒƒ
- ã€å¿…é¡»ã€‘éè¯´æ˜æ–‡ä»¶å‘½åè§„èŒƒ - å‰ç¼€å‘½åè§„åˆ™
- ã€å¿…é¡»ã€‘ç›®å½•ç»“æ„å’Œ index æ–‡ä»¶è§„èŒƒ
- ã€å¿…é¡»ã€‘è¯­è¨€åŒ…è§„èŒƒ
- ã€å¿…é¡»ã€‘æ•°æ®åº“æ“ä½œè§„èŒƒ
- ã€å¿…é¡»ã€‘å‰ç«¯å®‰å…¨è§„èŒƒ - XSS é˜²æŠ¤ã€å®‰å…¨å·¥å…·é›†æˆ
- ã€å¿…é¡»ã€‘åç«¯å®‰å…¨è§„èŒƒ - è¯·æ±‚é™æµã€CSRF é˜²æŠ¤ã€è¾“å…¥éªŒè¯
- ã€å¿…é¡»ã€‘å‰ç«¯æ•°å€¼è®¡ç®—è§„èŒƒ - é«˜ç²¾åº¦è®¡ç®—å·¥å…·
- ã€å¿…é¡»ã€‘å‰ç«¯æ€§èƒ½è§„èŒƒ
- ã€å¿…é¡»ã€‘æ–‡æ¡£è§„èŒƒ
- ã€æ¨èã€‘ä»£ç ç»„ç»‡æœ€ä½³å®è·µ

---

## é¡¹ç›®ç‰¹å®šé…ç½®

### I. æŠ€æœ¯æ ˆç‰ˆæœ¬ (Project-Specific Tech Stack)

æœ¬é¡¹ç›®ä½¿ç”¨çš„å…·ä½“ç‰ˆæœ¬ï¼ˆç»§æ‰¿ team-rule.md çš„æŠ€æœ¯æ ˆè¦æ±‚ï¼‰ï¼š

| æŠ€æœ¯ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| Node.js | é¡¹ç›® `.nvmrc` æˆ– `package.json.engines` æŒ‡å®š | è¿è¡Œæ—¶ |
| åŒ…ç®¡ç†å™¨ | npm/pnpmï¼ˆé¡¹ç›®æŒ‡å®šï¼‰ | åŒ…ç®¡ç†å™¨ |
| å‰ç«¯æ¡†æ¶ | Vue 2.x / Vue 3.x / Nuxt 3.xï¼ˆé¡¹ç›®æŒ‡å®šï¼‰ | å‰ç«¯æ¡†æ¶ |
| UI ç»„ä»¶åº“ | TDesign / Elementï¼ˆé¡¹ç›®æŒ‡å®šï¼‰ | UI ç»„ä»¶åº“ |
| åç«¯æ¡†æ¶ | NestJSï¼ˆå¦‚é€‚ç”¨ï¼‰ | åç«¯æ¡†æ¶ |
| æ•°æ®åº“ | PostgreSQL / MySQLï¼ˆé¡¹ç›®æŒ‡å®šï¼‰ | æ•°æ®åº“ |
| ORM | TypeORM / Prismaï¼ˆé¡¹ç›®æŒ‡å®šï¼‰ | ORM |
| TypeScript | ^4.x / ^5.xï¼ˆé¡¹ç›®æŒ‡å®šï¼‰ | è¯­è¨€ |

> **æ³¨æ„**ï¼šå…·ä½“ç‰ˆæœ¬ä»¥é¡¹ç›®æ ¹ç›®å½•çš„ `package.json` å’Œ `.nvmrc` ä¸ºå‡†

### II. æ ¸å¿ƒä¾èµ–åŒ…ç‰ˆæœ¬

| åŒ…å | é€‚ç”¨åœºæ™¯ | ç”¨é€” |
|------|----------|------|
| `@tencent/s2-core-lib` | Vue 3 é¡¹ç›® | å®‰å…¨å·¥å…·ã€ç²¾åº¦è®¡ç®— |
| `@tencent/s2-client-vue-lib` | Vue 2 é¡¹ç›® | å®‰å…¨å·¥å…·ã€ç²¾åº¦è®¡ç®— |
| `@tencent/s2-core-node` | NestJS åç«¯ | å®‰å…¨å·¥å…·ã€é™æµã€CSRF |

---

## Development Workflow

### Spec-Kit SDD å·¥ä½œæµ

Spec-Kit é‡‡ç”¨ SDDï¼ˆSpecification-Driven Developmentï¼‰è§„çº¦é©±åŠ¨å¼€å‘æ¨¡å¼ï¼š

```
/speckit.specify â†’ /speckit.clarify â†’ /speckit.plan â†’ /speckit.tasks â†’ /speckit.implement
```

### å‘½ä»¤è¯´æ˜

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `/speckit.constitution` | åˆ›å»º/æ›´æ–°é¡¹ç›®å®ªæ³• |
| `/speckit.specify` | åˆ›å»ºåŠŸèƒ½è§„æ ¼è¯´æ˜ |
| `/speckit.clarify` | æ¾„æ¸…è§„æ ¼ä¸­çš„æ¨¡ç³Šç‚¹ |
| `/speckit.plan` | åˆ›å»ºæŠ€æœ¯å®ç°è®¡åˆ’ |
| `/speckit.tasks` | ç”Ÿæˆä»»åŠ¡åˆ—è¡¨ |
| `/speckit.checklist` | ç”Ÿæˆè´¨é‡æ£€æŸ¥æ¸…å• |
| `/speckit.analyze` | ä¸€è‡´æ€§åˆ†æ |
| `/speckit.implement` | æ‰§è¡Œå®ç° |

### æœ¬åœ°å¼€å‘æµç¨‹

1. **ç¯å¢ƒå‡†å¤‡**:
    ```bash
    nvm use [version]
    npm install
    ```

2. **å¯åŠ¨å¼€å‘**:
    ```bash
    npm run dev
    ```

3. **æ„å»ºå‘å¸ƒ**:
    ```bash
    npm run build
    ```

---

## Quality Gates

### Pre-commit æ£€æŸ¥

è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼ˆç»§æ‰¿è‡ª team-rule.md ä»£ç è´¨é‡è¦æ±‚ï¼‰ï¼š
- ESLint æ£€æŸ¥
- TypeScript ç±»å‹æ£€æŸ¥
- Prettier æ ¼å¼åŒ–

### CI/CD æ£€æŸ¥

æ„å»ºæµç¨‹ MUST é€šè¿‡ä»¥ä¸‹æ£€æŸ¥ï¼š
1. Lint æ£€æŸ¥
2. TypeScript ç±»å‹æ£€æŸ¥
3. æ„å»º

---

## Governance

- Constitution ä¼˜å…ˆäºå…¶ä»–æ‰€æœ‰å®è·µå’Œçº¦å®šï¼ˆé™¤ç»§æ‰¿çš„ team-rule.mdï¼‰
- ä¿®æ”¹ Constitution éœ€è¦ï¼š
    1. æ–‡æ¡£åŒ–å˜æ›´å†…å®¹
    2. æ›´æ–°ç‰ˆæœ¬å·
- æ‰€æœ‰ PR/ä»£ç å®¡æŸ¥ MUST éªŒè¯æ˜¯å¦ç¬¦åˆ Constitution

**Version**: 1.1.0 | **Source**: @tencent/s2-spec-kit-core
